sudo: required
dist: trusty
language: python
python:
      - "2.7"
install:
      - export PATH=/usr/bin:$PATH
      - sudo dpkg --add-architecture i386
      - sudo add-apt-repository -y ppa:kivy-team/kivy-daily
      - sudo apt-get -qq update
      - sudo apt-get -qq install build-essential ccache git libncurses5:i386 libstdc++6:i386 libgtk2.0-0:i386 libpangox-1.0-0:i386 libpangoxft-1.0-0:i386 libidn11:i386 python2.7 python2.7-dev openjdk-8-jdk unzip zlib1g-dev zlib1g:i386
      - sudo apt-get -qq install m4 python-kivy
      - sudo apt-get -qq install libc6-dev-i386
      - pip install --upgrade cython==0.25.2 pip setuptools
      - git clone https://github.com/kivy/buildozer.git
      - cd buildozer
      - sudo python setup.py install
      - cd ..
      - sudo rm -rf .buildozer
      - mv buildozer.spec.travis buildozer.spec
      - mkdir -p cd ~/.buildozer/android/platform/
      - wget 'https://dl.google.com/android/repository/android-ndk-r13b-linux-x86_64.zip' -P ~/.buildozer/android/platform/
      - unzip -qq ~/.buildozer/android/platform/android-ndk-r13b-linux-x86_64.zip -d ~/.buildozer/android/platform/
script:
      - buildozer android update
      - buildozer android deploy
